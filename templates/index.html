<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabela Nutricional</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <section class="secao-formulario">
        <h1>Tabela Nutricional</h1>
        <form method="POST" class="formulario-pesquisar-alimento">
            {{ form.csrf_token }}
            {{ form.alimento(type="text", id="produto", placeholder="Digite um alimento") }}
            {{ form.submit(id="btnPesquisar", class="btn btn-primary") }}
        </form>
    </section>
    <div class="secao-tabela">
        {% set info_alimento = info_alimento %}
            {% if info_alimento is mapping %}
                {% set nome = info_alimento.get('nome', 'Informação não disponível') %}
                {% set descricao = info_alimento.get('descricao', 'Informação não disponível') %}

                {% set nutrientes = info_alimento.get('nutrientes', {}) %}
                {% if nutrientes %}
                    {% set calorias = nutrientes.get('calorias', 'Não disponível') %}
                    {% set carboidratos = nutrientes.get('carboidratos', 'Não disponível') %}
                    {% set proteinas = nutrientes.get('proteinas', 'Não disponível') %}
                    {% set gorduras = nutrientes.get('gorduras', 'Não disponível') %}
                    {% set fibra_alimentar = nutrientes.get('fibra_alimentar', 'Não disponível') %}

                    {% set vitaminas = nutrientes.get('vitaminas', {}) %}
                    {% set vitamina_c = vitaminas.get('vitamina_C', 'Não disponível') %}
                    {% set vitamina_b9 = vitaminas.get('vitamina_B9', 'Não disponível') %}

                    {% set minerais = nutrientes.get('minerais', {}) %}
                    {% set ferro = minerais.get('ferro', 'Não disponível') %}
                    {% set magnesio = minerais.get('magnésio', 'Não disponível') %}
                    {% set potassio = minerais.get('potassio', 'Não disponível') %}
                {% endif %}
                <table class="table table-striped">
                    <tbody id="tabelaNutrientes">
                        <tr><td class="titulo">Descrição</td><td>{{ descricao }}</td></tr>
                        <tr><td class="titulo">Calorias</td><td>{{ calorias }}</td></tr>
                        <tr><td class="titulo">Carboidratos</td><td>{{ carboidratos }}</td></tr>
                        <tr><td class="titulo">Proteínas</td><td>{{ proteinas }}</td></tr>
                        <tr><td class="titulo">Gorduras</td><td>{{ gorduras }}</td></tr>
                        <tr><td class="titulo">Fibra Alimentar</td><td>{{ fibra_alimentar }}</td></tr>
                        <tr><td class="titulo">Vitamina C</td><td>{{ vitamina_c }}</td></tr>
                        <tr><td class="titulo">Vitamina B9</td><td>{{ vitamina_b9 }}</td></tr>
                        <tr><td class="titulo">Ferro</td><td>{{ ferro }}</td></tr>
                        <tr><td class="titulo">Magnésio</td><td>{{ magnesio }}</td></tr>
                        <tr><td class="titulo">Potássio</td><td>{{ potassio }}</td></tr>
                    </tbody>
                </table>
            {% else %}
                <table class="table table-striped">
                    <tbody id="tabelaNutrientes">
                        <tr><td class="titulo">Descrição</td><td>-</td></tr>
                        <tr><td class="titulo">Calorias</td><td>-</td></tr>
                        <tr><td class="titulo">Carboidratos</td><td>-</td></tr>
                        <tr><td class="titulo">Proteínas</td><td>-</td></tr>
                        <tr><td class="titulo">Gorduras</td><td>-</td></tr>
                        <tr><td class="titulo">Fibra Alimentar</td><td>-</td></tr>
                        <tr><td class="titulo">Vitamina C</td><td>-</td></tr>
                        <tr><td class="titulo">Vitamina B9</td><td>-</td></tr>
                        <tr><td class="titulo">Ferro</td><td>-</td></tr>
                        <tr><td class="titulo">Magnésio</td><td>-</td></tr>
                        <tr><td class="titulo">Potássio</td><td>-</td></tr>
                    </tbody>
                </table>
            {% endif %}
    </div>
</body>
</html>
